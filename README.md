# MBFactorio ν€ ν”„λ΅μ νΈ
## π® ν”„λ΅μ νΈ κ°μ”
| ν•­λ©        | λ‚΄μ©                              |
|-------------|-----------------------------------|
| **μ¥λ¥΄**        | νƒ‘λ‹¤μ΄ λ·°μ μƒλ“λ°•μ¤ κ²μ„                 |
| **μ»¨μ…‰**        | Factorioμ—μ„ μκ°μ„ λ°›μ•„ μ μ‘ν• ν™©λ¬΄μ§€ μƒμ΅΄ νƒν—        |
| **λ©ν‘**        | C++ λ° Unreal Engine 5.4 κΈ°λ°μΌλ΅, μμ› μ±„κµ΄κ³Ό μ•„μ΄ν… μ μ‘μ΄ κ°€λ¥ν• ν•µμ‹¬ κ²μ„ μ‹μ¤ν… κµ¬ν„ |
| **κΈ°κ°„**        | 2025.04.03 ~ 2025.04.17           |
| **μ°Έμ—¬ μΈμ›**      | 3λ…(μ „μ› κ°λ° μ°Έμ—¬)                            |

![alt text](README_content/Main.png "Title Text")

---

## π› οΈ κΈ°μ  μ¤νƒ
- **μ–Έμ–΄** : C++
- **κ²μ„ μ—”μ§„** : Unreal Engine 5.4
- **λ²„μ „ κ΄€λ¦¬** : Sourcetree, GitHub
- **IDE** : Visual Studio 2022

---

## β΅ λΉλ“ λ° μ‹¤ν–‰ λ°©λ²•

1. **ν•„μ ν™κ²½**
   - Unreal Engine 5.4
   - Visual Studio 2022	
   - Windows 10/11 64bit

2. **ν”„λ΅μ νΈ ν΄λ΅ **
    ```bash
    git clone https://github.com/WJMcode/MBFactorio.git
    ```

3. **ν”„λ΅μ νΈ μ—΄κΈ°**
   - `MBFactorio.uproject` νμΌμ„ λ”λΈ” ν΄λ¦­ν•κ±°λ‚, μ–Έλ¦¬μ–Ό μ—λ””ν„°μ—μ„ μ§μ ‘ μ—΄κΈ°

4. **Visual Studio ν”„λ΅μ νΈ μƒμ„± λ° λΉλ“**
   - `MBFactorio.uproject` νμΌ μ°ν΄λ¦­ β†’ `Generate Visual Studio project files`
   - μƒμ„±λ `.sln` νμΌμ„ Visual Studioμ—μ„ μ—΄κ³  λΉλ“ μ‹¤ν–‰ (`Ctrl + Shift + B`)

5. **κ²μ„ μ‹¤ν–‰**
   - μ–Έλ¦¬μ–Ό μ—λ””ν„°μ—μ„ `Play` ν΄λ¦­

---

## π“ μ£Όμ” κΈ°λ¥ μ”μ•½

- **νƒ€μΌ κΈ°λ° λ§µ μ‹μ¤ν…**  
**ν”λ μ΄μ–΄ μ¤‘μ‹¬μ λ¬΄μ‘μ„ νƒ€μΌ λ°°μΉ**λ¥Ό ν†µν•΄ μ§€ν• λ° μμ›μ„ μƒμ„±ν•λ” **μƒλ“λ°•μ¤ ν™κ²½μ„ κµ¬μ„±**ν•©λ‹λ‹¤.

- **μ±„κµ΄ μ»΄ν¬λ„νΈ**  
Resource νƒ€μΌκ³Όμ μƒνΈμ‘μ©, μ±„κµ΄ μ§„ν–‰λ„ UI, μΈλ²¤ν† λ¦¬ λ°μκΉμ§€ μ—°κ²°λλ” **μ±„κµ΄ νλ¦„μ„ μ»΄ν¬λ„νΈν™”**ν•μ—¬ κ°λ°ν•μ€μµλ‹λ‹¤.

---

## π’΅ μ„¤κ³„ ν¬μΈνΈ
- **λ°μ΄ν„° μ—μ…‹ λ° μ»΄ν¬λ„νΈ κΈ°λ° κµ¬μ΅° μ„¤κ³„**  
  νƒ€μΌ μ •λ³΄λ” `TileDataAsset`, μ±„κµ΄ λ΅μ§μ€ `MiningComponent`λ΅ λ¶„λ¦¬ν•μ—¬,  
  **ν™•μ¥μ„±, μ¬μ‚¬μ©μ„±, μ μ§€λ³΄μ νΈμμ„±**μ„ κ³ λ ¤ν• κµ¬μ΅°λ¥Ό μ„¤κ³„ν•μ€μµλ‹λ‹¤.

- **ν™•λ¥  κΈ°λ° λλ¤ λ§µ μƒμ„±μΌλ΅ ν”λ μ΄μ λ‹¤μ–‘μ„±κ³Ό λ°λ³µμ„± κ°•ν™”**  
  ν”λ μ΄μ–΄ μ£Όλ³€μ— **ν™•λ¥ μ μΌλ΅ λ‹¤μ–‘ν• νƒ€μΌμ„ λ°°μΉ**ν•΄ λ§¤ κ²μ„λ§λ‹¤ λ‹¤λ¥Έ λ§µ ν™κ²½μ„ μ κ³µν•©λ‹λ‹¤.

- **μ»΄ν¬λ„νΈ λ¨λ“ν™” λ° μμ™Έ μ²λ¦¬λ΅ UX λ° μ•μ •μ„± ν–¥μƒ**  
  μ±„κµ΄ μ¤‘ μ΅°κ±΄ λ¶μ¶©μ΅± μ‹ μλ™ μ·¨μ† λ“± μμ™Έ μ²λ¦¬λ¥Ό ν†µν•΄ **λ²„κ·Έλ¥Ό λ°©μ§€ν•κ³  μ‚¬μ©μ κ²½ν—μ„ κ°μ„ **ν•μ€μµλ‹λ‹¤.

---

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```text
MBFactorio/
β”β”€β”€ Source/
β”‚   β””β”€β”€ MBFactorio/
β”‚       β”β”€β”€ Components/   # μ±„κµ΄ λ“± κ°μΆ… κ²μ„ μ»΄ν¬λ„νΈ (μ: MiningComponent)
β”‚       β”β”€β”€ Tiles/        # νƒ€μΌ μ‹μ¤ν…(νƒ€μΌ κ΄€λ ¨ ν΄λμ¤, λλ¤ λ°°μΉ λ§¤λ‹μ €, λ°μ΄ν„° κµ¬μ΅°μ²΄ λ“±)
β”‚       β”β”€β”€ Character/    # ν”λ μ΄μ–΄ μΊλ¦­ν„° κ΄€λ ¨
β”‚       β””β”€β”€ ...
β”β”€β”€ Content/              # μ–Έλ¦¬μ–Ό μ—μ…‹
β””β”€β”€ ...
```

---

## β οΈ νΈλ¬λΈ”μν…
- **λ‹¤μ¤‘ μ¤λ²„λ©λ μμ› νƒ€μΌ μΈμ‹ μ¤λ¥**
  - **λ¬Έμ  λ°°κ²½** : ν”λ μ΄μ–΄κ°€ λ‘ κ° μ΄μƒμ μμ› νƒ€μΌ(μ: κµ¬λ¦¬, μ² )κ³Ό λ™μ‹μ— μ¤λ²„λ©ν•  κ²½μ°,  
		μ²μ κ°μ§€λ μμ›λ§ μΈμ‹λκ³  λ‚λ¨Έμ§€λ” λ¬΄μ‹λλ” ν„μƒμ΄ λ°μƒν•μ€μµλ‹λ‹¤.
  - **μ›μΈ** : ν•λ‚μ μμ› νƒ€μΌλ§ μΈμ‹ν•λ„λ΅ κµ¬ν„λμ–΄ μμ—κΈ° λ•λ¬Έμ…λ‹λ‹¤.
  - **ν•΄κ²° κ³Όμ •** : `FindOverlappingTile` ν•¨μλ¥Ό λ„μ…ν•μ—¬ μ¤λ²„λ© ν•΄μ  μ‹,  
		μ£Όλ³€ μμ› νƒ€μΌμ„ μ¬νƒμƒ‰ν•κ³  κ°€μ¥ κ°€κΉμ΄ νƒ€μΌμ„ λ‹¤μ‹ μΈμ‹ν•λ„λ΅ κµ¬μ΅°λ¥Ό κ°μ„ ν•μ€μµλ‹λ‹¤.
  - **κ²°κ³Ό** : μ—¬λ¬ μμ› νƒ€μΌκ³Ό λ™μ‹μ— μ¤λ²„λ©ν•΄λ„ κ°€μ¥ κ°€κΉμ΄ νƒ€μΌμ„ μ •μƒμ μΌλ΅ μΈμ‹ν•  μ μκ² λμ—μµλ‹λ‹¤.
 
---

## π‘¨β€π’» λ‹΄λ‹Ή μ—­ν•  λ° κµ¬ν„ λ‚΄μ©

| κµ¬μ„± μ”μ†               | μ„¤λ… |
|---------------------|------|
| TileGridManager     | νƒ€μΌ ν΄λμ¤/λ°μ΄ν„° κµ¬μ΅° μ„¤κ³„, λ¬΄μ‘μ„ λ°°μΉ μ‹μ¤ν… κµ¬ν„ |
| MiningComponent     | μμ› μ±„κµ΄ λ΅μ§ κµ¬ν„, HUD μ—°λ™, μΈλ²¤ν† λ¦¬ λ°μ |

### 1. TileGridManager μ‹μ¤ν…
- **νƒ€μΌ ν΄λμ¤ μ„¤κ³„**  
	- κ³µν†µ κΈ°λ¥κ³Ό λ©”μ‹λ¥Ό κ΄€λ¦¬ν•λ” `Tile` ν΄λμ¤λ¥Ό μ„¤κ³„ν•κ³ ,  
	**Ground, Resource, Structures** λ“± λ‹¤μ–‘ν• ν•μ„ ν΄λμ¤λ¥Ό κµ¬μ„±ν•μ€μµλ‹λ‹¤.
- **νƒ€μΌ λ°μ΄ν„° κµ¬μ΅°ν™”**  
	- `TileStructs` κµ¬μ΅°μ²΄λ¥Ό ν†µν•΄ **μμ›μ€ νƒ€μ…λ³„ λ‹¤μ¤‘ λ¨Έν‹°λ¦¬μ–Ό, κµ¬μ΅°λ¬Όμ€ λ‹¨μΌ λ¨Έν‹°λ¦¬μ–Ό** κµ¬μ΅°λ΅ μ •μν•μ€μµλ‹λ‹¤.  
	- μ΄λ¥Ό κΈ°λ°μΌλ΅ `TileDataAsset` ν΄λμ¤λ¥Ό μ„¤κ³„ν•μ—¬, **μ–Έλ¦¬μ–Ό μ—λ””ν„°μ—μ„ νƒ€μ… λ° λ¨Έν‹°λ¦¬μ–Ό λ°μ΄ν„°λ¥Ό μ§κ΄€μ μΌλ΅  
 	μ„¤μ •Β·κ΄€λ¦¬**ν•  μ μλ„λ΅ κµ¬μ„±ν•μ€μµλ‹λ‹¤.
- **νƒ€μΌ λλ¤ λ°°μΉ**  
	- `TileGridManager` ν΄λμ¤μ—μ„ ν”λ μ΄μ–΄λ¥Ό μ¤‘μ‹¬μΌλ΅ λ‹¤μ–‘ν• νƒ€μ…μ νƒ€μΌμ„  
 	**ν™•λ¥ μ— λ”°λΌ λ°°μΉν•κ³ , κ° νƒ€μΌμ— λλ¤ν• νμ „κ³Ό λ¨Έν‹°λ¦¬μ–Όμ„ μ μ©**ν•μ€μµλ‹λ‹¤.
- **μ£Όμ” ν•¨μ** 
  - `SpawnTiles` ν•¨μ ν•λ‚λ΅ λ‹¤μ–‘ν• νƒ€μΌμ μƒμ„±μ„ ν†µν•©ν•μ€μµλ‹λ‹¤.  

### 2. MiningComponent κµ¬ν„
- **μ±„κµ΄ μ‹μ¤ν… μ„¤κ³„**
  	- ν”λ μ΄μ–΄κ°€ **Resource νƒ€μΌμ— μ¤λ²„λ© ν›„ μ°ν΄λ¦­**ν•λ” λ°©μ‹μΌλ΅ μ±„κµ΄ν•  μ μλ„λ΅ κµ¬ν„ν•μ€μµλ‹λ‹¤.
	- μμ›μ μΆ…λ¥λ” ResourceTileμ νƒ€μ…μ— λ”°λΌ μλ™ νλ³„λλ©°, **ν•΄λ‹Ή μμ›μ΄ μΈλ²¤ν† λ¦¬μ— μ¶”κ°€**λ©λ‹λ‹¤.
- **μ±„κµ΄ μ§„ν–‰ μ‹κ°ν™”**
	- μ±„κµ΄ μ§„ν–‰ μ¤‘μ—λ” **HUDμ— μ§„ν–‰λ„ μ„μ ―μ„ ν‘μ‹**ν•κ³ ,  
	**μ™„λ£ λλ” μ¤‘λ‹¨ μ‹, HUDλ¥Ό μ¨κΈ°λ©° κ²°κ³Όλ¥Ό μΈλ²¤ν† λ¦¬μ— λ°μ**ν•λ„λ΅ κµ¬μ„±ν•μ€μµλ‹λ‹¤.
- **μ±„κµ΄ κΈ°λ¥μ μ»΄ν¬λ„νΈν™”**
	- μ±„κµ΄ κΈ°λ¥μ„ `MiningComponent`λ΅ λ¶„λ¦¬ν•μ—¬ μΊλ¦­ν„°μ— **λ…λ¦½μ μΌλ΅ λ¶€μ°© κ°€λ¥ν• κµ¬μ΅°**λ΅ κµ¬ν„ν•μ€μµλ‹λ‹¤.  
	μ΄λ¥Ό ν†µν•΄ **κΈ°λ¥μ μ¬μ‚¬μ©μ„±**μ„ λ†’μ΄κ³ , **μ μ§€λ³΄μ λν• μ©μ΄**ν•λ„λ΅ μ„¤κ³„ν•μ€μµλ‹λ‹¤.
- **μ£Όμ” ν•¨μ**  
	μ±„κµ΄ νλ¦„μ„ **ν•¨μ λ‹¨μ„λ΅ λ…ν™•ν λ¶„λ¦¬**ν•μ€μµλ‹λ‹¤.  
	μ΄λ¥Ό ν†µν•΄ **κ°€λ…μ„±κ³Ό μ μ§€λ³΄μμ„±μ„ λ†’μ΄κ³ **, μ±„κµ΄ λ΅μ§μ **ν™•μ¥ λ° λ””λ²„κΉ…μ΄ μ©μ΄**ν•λ„λ΅ μ„¤κ³„ν•μ€μµλ‹λ‹¤.
	- **TryStartMining()** : μ±„κµ΄ κ°€λ¥ μƒνƒ νλ‹¨ λ° μ‹λ„
	- **StartMining()** : μ§„ν–‰λ„ μ—…λ°μ΄νΈ λ° μΈλ²¤ν† λ¦¬ λ°μ
	- **StopMining()** : μ±„κµ΄ μ¤‘λ‹¨ λ° μƒνƒ μ΄κΈ°ν™”

---
 
## π” μ„Έλ¶€ κµ¬ν„ (μ£Όμ” μ½”λ“/λ΅μ§)

### 1. TileGridManager
#### **1.1 TileDataAssetμ λ„μ…**
  - **κ°μ”**  
μ–Έλ¦¬μ–Ό μ—”μ§„μ DataAssetμ„ μƒμ†λ°›μ•„ **νƒ€μΌ μ „μ© DataAssetμΈ TileDataAssetμ„ μ„¤κ³„**ν–μµλ‹λ‹¤.  
**νƒ€μΌ μ ν•(Ground, Resource, Structures)μ— λ”°λΌ** ν΄λμ¤, ν¬κΈ°, λ¨Έν‹°λ¦¬μ–Ό, μΆ…λ¥(μ : κµ¬λ¦¬, μ² , ν™”λ΅ λ“±) **μ •λ³΄λ¥Ό κ΄€λ¦¬**ν•©λ‹λ‹¤.

- **μ„¤κ³„ μ¥μ **
	- νƒ€μΌμ μ •λ³΄λ¥Ό μ½”λ“μ— μ§μ ‘ μ‘μ„±ν•λ” λ€μ‹  `TileDataAsset`μΌλ΅ κ΄€λ¦¬ν•¨μΌλ΅μ¨ **λ°μ΄ν„° μ¤‘μ‹¬μ μ„¤κ³„**ν•  μ μμµλ‹λ‹¤.
 	- μμ› νƒ€μΌμ κ²½μ° μΆ…λ¥λ³„λ΅ μ—¬λ¬ κ°μ λ¨Έν‹°λ¦¬μ–Όμ„ μ„¤μ •ν•  μ μμ–΄, κ²μ„ λ‚΄ **μ‹κ°μ μΈ λ‹¤μ–‘μ„±κ³Ό ν‘ν„λ ¥μ„ ν–¥μƒ**μ‹ν‚µλ‹λ‹¤.
  	- νƒ€μΌ κ΄€λ ¨ λ°μ΄ν„°λ” `TileDataAsset`μ΄ μ •μν•κ³ , μƒμ„± λ° λ°°μΉλ” `TileGridManager`κ°€ λ‹΄λ‹Ήν•μ—¬  
  	  **λ…ν™•ν• μ—­ν•  λ¶„λ¦¬**κ°€ μ΄λ£¨μ–΄μ΅μµλ‹λ‹¤.
  	- μ–Έλ¦¬μ–Ό μ—λ””ν„°μ—μ„ λ°μ΄ν„°λ¥Ό μ§μ ‘ μ΅°μ •ν•  μ μμ–΄, **ν”„λ΅κ·Έλλ¨Έκ°€ μ•„λ‹ μ§κµ°κ³Όλ„ ν¨μ¨μ μΌλ΅ ν‘μ—…**ν•  μ μμµλ‹λ‹¤.

<br>

> π“Έ μ•„λλ” μ–Έλ¦¬μ–Ό μ—λ””ν„°μ—μ„ TileDataAssetμ„ κΈ°λ°μΌλ΅ μƒμ„±ν• DataAssetμ μ„¤μ • ν™”λ©΄μ…λ‹λ‹¤.
> <br>
> <br>
> ![alt text](README_content/EditorIMG_TileDataAsset.png "Title Text")

<br>

> π“„ μ•„λλ” νƒ€μΌ λ°μ΄ν„°λ¥Ό μ •μν•λ” κµ¬μ΅°μ²΄ `TileStructs`μ™€ DataAsset ν΄λμ¤ `TileDataAsset`μ ν•µμ‹¬ κµ¬ν„ μ½”λ“μ…λ‹λ‹¤.
```cpp
// Resource νƒ€μΌ : μΆ…λ¥(μ: κµ¬λ¦¬, μ² )μ™€ λ¨Έν‹°λ¦¬μ–Ό μ„ΈνΈλ¥Ό ν•¨κ» μ •μ
struct FResourceTypeAndMaterials
{
  // μμ› μΆ…λ¥ (μ : κµ¬λ¦¬, μ² )
  EResourceType ResourceType;

  // ν•΄λ‹Ή μμ›μ— μ‚¬μ©λ  λ¨Έν‹°λ¦¬μ–Ό λ©λ΅
  TArray<UMaterialInterface*> Materials;
};
```
>  π”— μ „μ²΄ μ½”λ“λ” [TileStructs.h](https://github.com/WJMcode/MBFactorio/blob/main/Source/MBFactorio/Tiles/TileBase/TileStructs.h)μ—μ„ ν™•μΈν•μ‹¤ μ μμµλ‹λ‹¤.

<br>

```cpp
class MBFACTORIO_API UTileDataAsset : public UDataAsset
{
public:
  // μƒμ„±ν•  νƒ€μΌμ κ°μ
  int32 GridWidth, GridHeight;

  // Ground / Resource / Structures νƒ€μΌμ— λ€ν• μ •λ³΄
  FTileInfo GroundTileInfo;
  FTileInfo ResourceTileInfo;
  FTileInfo StructuresTileInfo;

  // Ground νƒ€μΌμ© λ¨Έν‹°λ¦¬μ–Ό λ°°μ—΄
  TArray<UMaterialInterface*> GroundTileMaterials;

  // Resource νƒ€μΌ μΆ…λ¥λ³„ λ¨Έν‹°λ¦¬μ–Ό μ„ΈνΈ
  TArray<FResourceTypeAndMaterials> ResourceTileTypeAndMaterialSet;

  // Structures νƒ€μΌμ© λ¨Έν‹°λ¦¬μ–Ό
  FStructuresTypeAndMaterial StructuresTypeAndMaterial;
};

```

>  π”— μ „μ²΄ μ½”λ“λ” [TileDataAsset.h](https://github.com/WJMcode/MBFactorio/blob/main/Source/MBFactorio/Tiles/TileManager/TileDataAsset.h)μ—μ„ ν™•μΈν•μ‹¤ μ μμµλ‹λ‹¤.

<br>
     
#### **1.2 νƒ€μΌμ λλ¤ λ°°μΉ λ° νƒ€μ…/λ¨Έν‹°λ¦¬μ–Ό μλ™ ν• λ‹Ή**

  - **κ°μ”**  
`TileGridManager`λ” **Ground**, **Resource**, **Structures** νƒ€μΌμ„ **λλ¤ ν™•λ¥  κΈ°λ°μΌλ΅ λ°°μΉ**ν•μ—¬ ν™κ²½μ„ μλ™ μƒμ„±ν•©λ‹λ‹¤.  
κ° νƒ€μΌμ μ†μ„±μ€ `TileDataAsset`μ„ κΈ°λ°μΌλ΅ **μλ™ μ„¤μ •**λ©λ‹λ‹¤.

- **ν•µμ‹¬ λ΅μ§**
 ```mermaid 
flowchart TD
    Start["SpawnTiles νΈμ¶"] --> Class["νƒ€μΌ ν΄λμ¤ λ¶„κΈ°"]
    Class -- "Ground" --> GroundMat["λλ¤ λ¨Έν‹°λ¦¬μ–Ό μ μ©"]
    Class -- "Resource" --> ResType["λλ¤ μμ› νƒ€μ…/λ¨Έν‹°λ¦¬μ–Ό μ μ©"]
    Class -- "Structures" --> StructSet["μ§€μ •λ νƒ€μ…/λ¨Έν‹°λ¦¬μ–Ό μ μ©"]
    GroundMat --> Place["νƒ€μΌ λ°°μΉ"]
    ResType --> Place
    StructSet --> Place
    Place --> End["ν™κ²½μ— νƒ€μΌ μƒμ„± μ™„λ£"]
```
γ€€
γ€€γ€€γ€€γ€€β¬ `SpawnTiles` ν•¨μμ—μ„ **νƒ€μΌ ν΄λμ¤, ν™•λ¥ , ν¬κΈ°, νμ „ λ“±**μ„ λ°›μ•„, **μ§€μ •λ ν™•λ¥ κ³Ό μ΅°κ±΄**μ— λ”°λΌ νƒ€μΌμ„ **λ°°μΉ**ν•©λ‹λ‹¤.  
γ€€γ€€γ€€γ€€β¬ **Resource νƒ€μΌ**μ κ²½μ° `TileDataAsset`μ— μ •μλ **μμ› νƒ€μ… λ° λ¨Έν‹°λ¦¬μ–Ό μ„ΈνΈ μ¤‘ ν•λ‚λ¥Ό λ¬΄μ‘μ„λ΅ μ μ©**ν•©λ‹λ‹¤.  
γ€€γ€€γ€€γ€€β¬ **Ground νƒ€μΌ**μ€ **λ¨Έν‹°λ¦¬μ–Όλ§ λ¬΄μ‘μ„λ΅ μ μ©**λλ©°, **Structures νƒ€μΌ**μ€ **λ―Έλ¦¬ μ§€μ •λ κ°’μΌλ΅ μ„¤μ •**λ©λ‹λ‹¤.

- **μ„¤κ³„ μ¥μ **
	- β—‹ ν•¨μ λ§¤κ°λ³€μλ¥Ό ν†µν•΄ **νƒ€μΌ ν΄λμ¤, ν™•λ¥ , ν¬κΈ°, νμ „ λ“± μ„Έλ¶€ μ„¤μ •μ΄ κ°€λ¥**ν•μ—¬ λ‹¤μ–‘ν• λ§µ μƒν™©μ—  
   	μ μ—°ν•κ² λ€μ‘ν•  μ μμµλ‹λ‹¤.
	- νƒ€μΌμ μ†μ„±(λ¨Έν‹°λ¦¬μ–Ό, ν¬κΈ°, νμ „ λ“±)μ€ **`TileDataAsset`μ— μ €μ¥λ κ°’μ΄ μλ™μΌλ΅ μ μ©**λμ–΄,  
   	λ°λ³µμ μΈ μ„¤μ •μ„ μ¤„μ΄κ³  μΌκ΄€μ„±μ„ μ μ§€ν•  μ μμµλ‹λ‹¤.  
   	νΉν Resource/Structures νƒ€μΌμ μΆ…λ¥(μ : κµ¬λ¦¬, ν™”λ΅ λ“±)λ„ `TileDataAsset`μ—μ„ κ΄€λ¦¬λμ–΄,  
   	**μƒλ΅μ΄ μΆ…λ¥ μ¶”κ°€ μ‹ μ½”λ“ λ³€κ²½ μ—†μ΄ λ°μ΄ν„°λ§ μμ •ν•λ©΄ λ©λ‹λ‹¤.**
  	- λλ¤ λ¨Έν‹°λ¦¬μ–Ό λ° νμ „μ„ ν†µν•΄ **λ§¤λ² λ‹¤λ¥Έ μ§€ν•κ³Ό μμ›μ„ λ°°μΉ**ν•μ—¬ ν”λ μ΄μ–΄λ΅λ¶€ν„° ν¥λ―Έλ¥Ό μ λ°ν•©λ‹λ‹¤.

<br>

> π“Έ μ•„λλ” νƒ€μΌμ΄ λλ¤μΌλ΅ λ°°μΉλ μ‹¤μ  κ²μ„ μ¥λ©΄μ…λ‹λ‹¤.
> <br>
> <br>
> ![alt text](README_content/TileGridManager2.png "Title Text")

<br>
    
> π“„ μ•„λλ” `TileDataAsset`μ„ κΈ°λ°μΌλ΅ νƒ€μΌμ„ λλ¤ λ°°μΉν•λ” `TileGridManager`μ ν•µμ‹¬ κµ¬ν„ μ½”λ“μ…λ‹λ‹¤.
```cpp
// BeginPlayμ—μ„ νƒ€μΌλ³„ μƒμ„± ν•¨μ νΈμ¶
void ATileGridManager::BeginPlay()
{
  // κ° ν•¨μλ” SpawnTiles(...)λ¥Ό νΈμ¶ν•μ—¬, νƒ€μΌ μΆ…λ¥μ— λ”°λΌ ν΄λμ¤, ν™•λ¥ , ν¬κΈ°, νμ „κ°’ λ“±μ„ μ „λ‹¬ν•©λ‹λ‹¤.
  SpawnGroundTiles();     // 100% ν™•λ¥ , λλ¤ λ¨Έν‹°λ¦¬μ–Ό μ μ©
  SpawnResourceTiles();   // 30% ν™•λ¥ , λλ¤ νƒ€μ… + λ¨Έν‹°λ¦¬μ–Ό μ„ΈνΈ μ μ©
  SpawnStructuresTile();  // 1κ°λ§ κ³ μ • μƒμ„±, μ§€μ • νƒ€μ… + λ¨Έν‹°λ¦¬μ–Ό μ μ©
}

// μμ‹: Resource νƒ€μΌ μƒμ„± ν•¨μ
void ATileGridManager::SpawnResourceTiles()
{
  // SpawnTiles(νƒ€μΌ ν΄λμ¤, μƒμ„± ν™•λ¥ , Z-offset, νƒ€μΌ ν¬κΈ°, νμ „κ°’, λλ¤ νμ „ μ—¬λ¶€)
  SpawnTiles(ResourceTileInfo.TileClass, 0.3f, 0.1f, ResourceTileInfo.TileSize, FRotator(0.f, 90.f, 0.f), false);
}

// νƒ€μΌ μƒμ„± κ³µν†µ ν•¨μ
void ATileGridManager::SpawnTiles(νƒ€μΌ ν΄λμ¤, μƒμ„± ν™•λ¥ , Z-offset, νƒ€μΌ ν¬κΈ°, νμ „κ°’, λλ¤ νμ „ μ—¬λ¶€)
{
  for (int32 X = 0; X < GridWidth; ++X)
    for (int32 Y = 0; Y < GridHeight; ++Y)
      if (μƒμ„± ν™•λ¥  ν†µκ³Ό)
        NewTile = SpawnActor(...);
        if (GroundTile == NewTile)          { λλ¤ λ¨Έν‹°λ¦¬μ–Ό }
        else if (ResourceTile == NewTile)   { λλ¤ νƒ€μ… + λ¨Έν‹°λ¦¬μ–Ό μ„ΈνΈ λλ¤ μ μ© }
        else if (StructuresTile == NewTile) { μ§€μ • νƒ€μ… + λ¨Έν‹°λ¦¬μ–Ό + ν¬κΈ° μ΅°μ • }
        else                                { κ²½κ³  λ΅κ·Έ μ¶λ ¥ }
}
```

>  π”— μ „μ²΄ μ½”λ“λ” [TileGridManager.cpp](https://github.com/WJMcode/MBFactorio/blob/main/Source/MBFactorio/Tiles/TileManager/TileGridManager.cpp)μ—μ„ ν™•μΈν•μ‹¤ μ μμµλ‹λ‹¤.

<br>

### 2. MiningComponent

- **κ°μ”**  
`MiningComponent`λ” ν”λ μ΄μ–΄κ°€ Resource νƒ€μΌκ³Ό μ¤λ²„λ©λ μƒνƒμ—μ„ **μ°ν΄λ¦­(Hold) μ…λ ¥μΌλ΅ μμ›μ„ μ±„κµ΄**ν•  μ μλ„λ΅ κµ¬ν„λ μ¬μ‚¬μ© κ°€λ¥ν• μ»΄ν¬λ„νΈμ…λ‹λ‹¤.  
μ±„κµ΄ κ³Όμ •μ€ **HUDλ¥Ό ν†µν•΄ μ‹κ°μ μΌλ΅ ν‘μ‹**λλ©°, μ±„κµ΄ μ™„λ£ μ‹ **μμ›μ΄ μΈλ²¤ν† λ¦¬μ— μλ™μΌλ΅ μ¶”κ°€**λ©λ‹λ‹¤.

- **ν•µμ‹¬ λ΅μ§**
```mermaid
flowchart TD
    S["μ°ν΄λ¦­(Hold) μ…λ ¥"] --> T["TryStartMining()"]
    T --> A["μ±„κµ΄ μ΅°κ±΄ μ¶©μ΅±?"]
    A -- "μ•„λ‹μ¤" --> E["μ•„λ¬΄ λ™μ‘ μ—†μ"]
    A -- "μ" --> B["Hold μ‹κ°„ λ„μ "]
    B --> C["Hold μ‹κ°„ μ¶©μ΅±?"]
    C -- "μ•„λ‹μ¤" --> E
    C -- "μ" --> D["StartMining()"]
    D --> F["μ±„κµ΄ μ™„λ£?"]
    F -- "μ•„λ‹μ¤" --> D
    F -- "μ" --> G["μμ› μΈλ²¤ν† λ¦¬ λ°μ &         ν…μ¤νΈ μ• λ‹λ©”μ΄μ…"]
    S -. "μ…λ ¥ ν•΄μ " .-> H["StopMining()"]
    H --> I["μƒνƒ/μ§„ν–‰λ„/HUD μ΄κΈ°ν™”"]
```
1. **TryStartMining()**
     - μΊλ¦­ν„°κ°€ **μ±„κµ΄ κ°€λ¥ν• μƒνƒμΈμ§€ ν™•μΈ**ν•©λ‹λ‹¤.  
       (Resource νƒ€μΌκ³Ό μ¤λ²„λ© μƒνƒμ΄λ©°, μ°ν΄λ¦­ Hold μ‹κ°„μ΄ μ¶©λ¶„ν• κ²½μ°)
     - μ΅°κ±΄μ΄ μ¶©μ΅±λλ©΄ μΊλ¦­ν„°λ¥Ό μμ› λ°©ν–¥μΌλ΅ νμ „μ‹ν‚¤κ³ , `StartMining()`μ„ νΈμ¶ν•©λ‹λ‹¤.

2. **StartMining()**
     - HUDλ¥Ό ν†µν•΄ μ±„κµ΄ μ§„ν–‰λ„(0.0 ~ 1.0)λ¥Ό ν‘μ‹ν•©λ‹λ‹¤.  
     - μΌμ • μ‹κ°„μ΄ μ§€λ‚λ©΄ μ±„κµ΄μ„ μ™„λ£ν•κ³ , μμ›μ„ μΈλ²¤ν† λ¦¬μ— μ¶”κ°€ν•©λ‹λ‹¤.  
     - μ±„κµ΄ μ™„λ£λ¥Ό μ•λ¦¬λ” ν…μ¤νΈ μ• λ‹λ©”μ΄μ…μ„ μ¶λ ¥ν•©λ‹λ‹¤.

3. **StopMining()**
     - μ…λ ¥ ν•΄μ  λλ” μ΅°κ±΄ λ―Έμ¶©μ΅± μ‹ νΈμ¶λμ–΄ μ±„κµ΄μ„ μ¤‘λ‹¨ν•©λ‹λ‹¤.  
     - μ±„κµ΄ μƒνƒ μ΄κΈ°ν™”, HUD λ° μ• λ‹λ©”μ΄μ… μ¤‘μ§€ λ“±μ„ μ²λ¦¬ν•©λ‹λ‹¤.

- **μ„¤κ³„ μ¥μ **
	- **λ¶ν•„μ”ν• μ—°μ‚°μ„ μµμ†ν™”**ν•κ³ , **μ§§μ€ ν΄λ¦­(κ΄‘ν΄)μ„ λ°©μ§€**ν•©λ‹λ‹¤.  
	- μ±„κµ΄ μƒνƒ λ° HUD κ°±μ‹ , μΈλ²¤ν† λ¦¬ λ°μ, ν…μ¤νΈ ν‘μ‹ λ“± **κ° λ‹¨κ³„λ¥Ό λ…ν™•ν λ¶„λ¦¬**ν•μ—¬ **ν™•μ¥μ„±κ³Ό λ””λ²„κΉ…μ΄ μ©μ΄**ν•©λ‹λ‹¤.  
	- μ…λ ¥ ν•΄μ λ‚ μ΅°κ±΄ λ―Έμ¶©μ΅± μ‹ **μ¦‰κ°μ μΌλ΅ μƒνƒλ¥Ό μ΄κΈ°ν™”**ν•μ—¬ **μ•μ •μ μΌλ΅ λ™μ‘**ν•©λ‹λ‹¤.  

<br>

> π“Έ μ•„λλ” ν”λ μ΄μ–΄κ°€ μ±„κµ΄ν•μ—¬ μμ›μ„ νλ“ν•λ” μ‹¤μ  κ²μ„ μ¥λ©΄μ…λ‹λ‹¤.
> <br>
> <br>
> ![alt text](README_content/InGameGif_Mining.gif "Title Text")

<br>

> π“„ μ•„λλ” MiningComponentμ ν•µμ‹¬ κµ¬ν„ μ½”λ“μ…λ‹λ‹¤.
```cpp
// μ°ν΄λ¦­(Hold) μ…λ ¥μ΄ μ μ§€λλ” λ™μ• νΈμ¶λ¨
void UMiningComponent::TryStartMining()
{
    // μ¤λ²„λ©λ νƒ€μΌμ΄ μ—†κ±°λ‚ μ±„κµ΄ λ¶κ°€ μƒνƒλ©΄ λ¬΄μ‹
    if (!CurrentTargetTile || !bCanMine) return;

    // Hold μ‹κ°„ λ„μ 
    MiningHoldTime += GetWorld()->GetDeltaSeconds();

    // μ¶©λ¶„ν Holdν•λ©΄ μ±„κµ΄ λ°©ν–¥ νμ „, μ±„κµ΄ μ‹μ‘
    if (MiningHoldTime >= MinHoldTimeToPlayAnim)
    {
        RotateToMiningTarget();   // νƒ€κ² μμ› μ½μΌλ΅ μΊλ¦­ν„° νμ „
        StartMining();           // μ±„κµ΄ μ§„ν–‰
    }
}

// μ±„κµ΄ μ§„ν–‰ λ΅μ§
void UMiningComponent::StartMining()
{
    // μ±„κµ΄ μ§„ν–‰λ„ μ¦κ°€
    MiningProgressValue += GetWorld()->GetDeltaSeconds();

    // μ±„κµ΄ μ™„λ£ μ‹μ 
    if (MiningProgressValue >= MiningTimeToComplete)
    {
        // μμ› μ•„μ΄ν… μΈλ²¤ν† λ¦¬μ— μ¶”κ°€
        PlayerCharacter->GetInventoryComponent()->AddItem(...);

        // μ§„ν–‰λ„ μ΄κΈ°ν™”(λ‹¤μ μ±„κµ΄μ„ μ„ν•΄)
        MiningProgressValue = 0.f;
    }
}

// μ…λ ¥ ν•΄μ  λλ” μ΅°κ±΄ λ―Έμ¶©μ΅± μ‹ νΈμ¶
void UMiningComponent::StopMining()
{
    // μ±„κµ΄ μ§„ν–‰λ„μ™€ Hold μ‹κ°„ μ΄κΈ°ν™”
    MiningProgressValue = 0.0f;
    MiningHoldTime = 0.0f;
}
```

>  π”— μ „μ²΄ μ½”λ“λ” [MiningComponent.cpp](https://github.com/WJMcode/MBFactorio/blob/main/Source/MBFactorio/Component/Mining/MiningComponent.cpp)μ—μ„ ν™•μΈν•μ‹¤ μ μμµλ‹λ‹¤.


---

## π” κµ¬ν„ μ‹ κ³ λ―Ό λ° λ¬Έμ  ν•΄κ²°

- **λ³µμ μ¤λ²„λ© μ²λ¦¬** :  
  - μ—¬λ¬ μμ› νƒ€μΌκ³Ό λ™μ‹ μ¤λ²„λ© μ‹, μ²« λ²μ§Έ νƒ€μΌλ§ μΈμ‹ν•λ λ¬Έμ 
  - β†’ μ¤λ²„λ© ν•΄μ  μ‹ `FindOverlappingTile()` νΈμ¶, μ£Όλ³€ νƒ€μΌ μ¬νƒμƒ‰ λ° μƒνƒ λ™κΈ°ν™”

- **UX κ°μ„ ** :  
  - μ±„κµ΄ λ„μ¤‘ μ°ν΄λ¦­ λ―Έμ μ§€/μ»¤μ„ μ΄νƒ λ“± μμ™Έμ²λ¦¬ κ°•ν™”  
  - μ• λ‹λ©”μ΄μ… λ°λ³µ λ°©μ§€ λ“± μ‚¬μ©μ κ²½ν— κ°μ„ 

- **κµ¬μ΅° λ¦¬ν©ν† λ§** :  
  - μ»΄ν¬λ„νΈ κΈ°λ° κµ¬μ΅° μ μ©μΌλ΅ μ½”λ“ μ¬μ‚¬μ©μ„±/μ μ§€λ³΄μμ„± κ°•ν™”

---

## π“ μ°Έκ³  μ‚¬ν•­
- λΉλ“/μ‹¤ν–‰ μ¤λ¥ λ°μƒ μ‹ Content κ²½λ΅ ν™•μΈ ν•„μ
  
---

## π± ν”„λ΅μ νΈλ¥Ό ν†µν•΄ μ–»μ€ κ²ƒ

- νƒ€μΌ κµ¬μ΅°μ™€ μμ› μ±„κµ΄ μ‹μ¤ν…μ„ μ„¤κ³„ν•λ©΄μ„, **μ¬μ‚¬μ©μ„±κ³Ό ν™•μ¥μ„±**μ„ κ³ λ ¤ν• μ„¤κ³„μ μ¤‘μ”μ„±μ„ μ²΄κ°ν–μµλ‹λ‹¤.
- μ»΄ν¬λ„νΈ λ‹¨μ„λ΅ λ¶„λ¦¬ν• μ‹μ¤ν…μ€ **λ””λ²„κΉ…, ν…μ¤νΈ, μ μ§€λ³΄μ**μ— ν° μ¥μ μ„ μ£Όμ—μΌλ©°, ν–¥ν›„ κ°λ°μ—μ„λ„ μ΄λ¬ν• λ°©μ‹μ κµ¬μ΅°ν™”λ¥Ό μ§€ν–¥ν•  κ³„νμ…λ‹λ‹¤.
- ν€μ›λ“¤κ³Όμ ν‘μ—… μ¤‘ **κΈ°λ¥ λ¶„λ‹΄ λ° Git λΈλμΉ κ΄€λ¦¬**λ¥Ό κ²½ν—ν•λ©°, μ½”λ“ λ¦¬λ·°μ™€ μ†ν†µμ μ¤‘μ”μ„±μ„ λκΌμµλ‹λ‹¤.

---

## β‰οΈ Contact

- μ΄λ©”μΌ : uoipoip@gmail.com
- GitHub : [WJMcode/MBFactorio](https://github.com/WJMcode/MBFactorio)

---

